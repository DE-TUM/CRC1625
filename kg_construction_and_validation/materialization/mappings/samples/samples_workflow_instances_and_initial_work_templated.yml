# For SQL access keywords: https://github.com/redmer/yarrrml-json-schema/blob/main/src/yarrrml-json-schema.json
prefixes: {prefixes}

sources:
  sql_source: {sources}

mappings:
  samples_metadata:
    sources: sql_source
    s: object:$(SampleId)
    po:
      - [a, pmdco:EngineeredMaterial~iri]
      - [crc:internalID, $(SampleId), xsd:integer]
      - [crc:externalID, $(externalID), xsd:integer]
      - [crc:creator, user:$(createdBy)~iri]
      - [crc:creationDate, $(created), xsd:dateTime]
      - [crc:objectName, $(ObjectName), xsd:string]
      - [crc:objectDescription, $(ObjectDescription), xsd:string]

  workflow_instances:
    sources: sql_source
    s: workflow_instance:$(SampleId)
    po:
      - [a, crc:HandoverWorkflowInstance~iri]
      - [crc:input, object:$(SampleId)~iri]
      - [crc:substep, handover:initial_work_for_ML_$(SampleId)~iri]

  initial_work_handover:
    sources: sql_source
    s: handover:initial_work_for_ML_$(SampleId)
    po:
      - [a, crc:VirtualHandover~iri]
      # Virtual handovers have the same owner and receiver
      - [crc:assignedTo, user:$(createdBy)~iri]
      - [crc:creator, user:$(createdBy)~iri]
      - [crc:creationDate, $(created), xsd:dateTime]
      - [crc:objectName, Initial work for ML $(SampleId), xsd:string]
      - [crc:objectDescription, Measurements and other data added to the ML $(SampleId) before any handover occurred, xsd:string]