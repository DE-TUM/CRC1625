SELECT
  (COUNT(?sample_w_handover) as ?count_w)
  (COUNT(?sample) as ?total_samples)
  (xsd:decimal(COUNT(?sample_w_handover)) / xsd:decimal(COUNT(?sample)) as ?chance_to_have_handover)
FROM <https://crc1625.mdi.ruhr-uni-bochum.de/graph>
{
    {
        SELECT DISTINCT ?sample_w_handover WHERE {
          ?sample_w_handover a :MaterialsLibrary.

          ?workflow_instance pmdco:input ?sample_w_handover.
          ?workflow_instance pmdco:subordinateProcess ?first_handover_group.

          # The initial handover doesn't count
          ?first_handover_group pmdco:nextProcess+/pmdco:subordinateProcess ?handover.
        }
    }

    UNION

    {
        SELECT ?sample WHERE {
          ?sample a :MaterialsLibrary.
        }
    }
}
